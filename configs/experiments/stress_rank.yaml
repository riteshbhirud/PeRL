base:
  model:
    model_name_or_path: deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B
    attn_implementation: flash_attention_2
    dtype: bfloat16
  dataset:
    dataset_name_or_path: open-r1/DAPO-Math-17k-Processed
  training:
    max_steps: 512
    per_device_train_batch_size: 4
    gradient_accumulation_steps: 8
    learning_rate: 1e-05
    warmup_ratio: 0.1
    save_steps: 128
    logging_steps: 10
    eval_steps: 128
    use_liger_kernel: false
    gradient_checkpointing: true
    report_to:
    - wandb
  tracker:
    enable_spectral_tracking: true
    enable_gradient_tracking: true
    spectral_log_frequency: 100
    gradient_log_frequency: 100
    save_trajectory: true
  wandb:
    use_wandb: true
    project: peft-rlvr-mechanistic
    tags:
    - stress-test
    - low-rank
  common:
    seed: 42
    output_dir: output/stress_rank
experiments:
- name: lora_r1_seed42
  peft:
    type: lora
    r: 1
    lora_alpha: 2
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: lora_r1_seed42
    tags:
    - stress-test
    - low-rank
    - r1
    - lora
- name: lora_r1_seed43
  peft:
    type: lora
    r: 1
    lora_alpha: 2
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: lora_r1_seed43
    tags:
    - stress-test
    - low-rank
    - r1
    - lora
- name: lora_r2_seed42
  peft:
    type: lora
    r: 2
    lora_alpha: 4
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: lora_r2_seed42
    tags:
    - stress-test
    - low-rank
    - r2
    - lora
- name: lora_r2_seed43
  peft:
    type: lora
    r: 2
    lora_alpha: 4
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: lora_r2_seed43
    tags:
    - stress-test
    - low-rank
    - r2
    - lora
- name: lora_r4_seed42
  peft:
    type: lora
    r: 4
    lora_alpha: 8
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: lora_r4_seed42
    tags:
    - stress-test
    - low-rank
    - r4
    - lora
- name: lora_r4_seed43
  peft:
    type: lora
    r: 4
    lora_alpha: 8
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: lora_r4_seed43
    tags:
    - stress-test
    - low-rank
    - r4
    - lora
- name: lora_r8_seed42
  peft:
    type: lora
    r: 8
    lora_alpha: 16
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: lora_r8_seed42
    tags:
    - stress-test
    - low-rank
    - r8
    - lora
- name: lora_r8_seed43
  peft:
    type: lora
    r: 8
    lora_alpha: 16
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: lora_r8_seed43
    tags:
    - stress-test
    - low-rank
    - r8
    - lora
- name: dora_r1_seed42
  peft:
    type: dora
    r: 1
    lora_alpha: 2
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: dora_r1_seed42
    tags:
    - stress-test
    - low-rank
    - r1
    - dora
- name: dora_r1_seed43
  peft:
    type: dora
    r: 1
    lora_alpha: 2
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: dora_r1_seed43
    tags:
    - stress-test
    - low-rank
    - r1
    - dora
- name: dora_r2_seed42
  peft:
    type: dora
    r: 2
    lora_alpha: 4
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: dora_r2_seed42
    tags:
    - stress-test
    - low-rank
    - r2
    - dora
- name: dora_r2_seed43
  peft:
    type: dora
    r: 2
    lora_alpha: 4
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: dora_r2_seed43
    tags:
    - stress-test
    - low-rank
    - r2
    - dora
- name: dora_r4_seed42
  peft:
    type: dora
    r: 4
    lora_alpha: 8
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: dora_r4_seed42
    tags:
    - stress-test
    - low-rank
    - r4
    - dora
- name: dora_r4_seed43
  peft:
    type: dora
    r: 4
    lora_alpha: 8
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: dora_r4_seed43
    tags:
    - stress-test
    - low-rank
    - r4
    - dora
- name: dora_r8_seed42
  peft:
    type: dora
    r: 8
    lora_alpha: 16
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: dora_r8_seed42
    tags:
    - stress-test
    - low-rank
    - r8
    - dora
- name: dora_r8_seed43
  peft:
    type: dora
    r: 8
    lora_alpha: 16
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: dora_r8_seed43
    tags:
    - stress-test
    - low-rank
    - r8
    - dora
- name: pissa_r1_seed42
  peft:
    type: pissa
    r: 1
    lora_alpha: 2
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: pissa_r1_seed42
    tags:
    - stress-test
    - low-rank
    - r1
    - pissa
- name: pissa_r1_seed43
  peft:
    type: pissa
    r: 1
    lora_alpha: 2
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: pissa_r1_seed43
    tags:
    - stress-test
    - low-rank
    - r1
    - pissa
- name: pissa_r2_seed42
  peft:
    type: pissa
    r: 2
    lora_alpha: 4
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: pissa_r2_seed42
    tags:
    - stress-test
    - low-rank
    - r2
    - pissa
- name: pissa_r2_seed43
  peft:
    type: pissa
    r: 2
    lora_alpha: 4
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: pissa_r2_seed43
    tags:
    - stress-test
    - low-rank
    - r2
    - pissa
- name: pissa_r4_seed42
  peft:
    type: pissa
    r: 4
    lora_alpha: 8
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: pissa_r4_seed42
    tags:
    - stress-test
    - low-rank
    - r4
    - pissa
- name: pissa_r4_seed43
  peft:
    type: pissa
    r: 4
    lora_alpha: 8
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: pissa_r4_seed43
    tags:
    - stress-test
    - low-rank
    - r4
    - pissa
- name: pissa_r8_seed42
  peft:
    type: pissa
    r: 8
    lora_alpha: 16
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: pissa_r8_seed42
    tags:
    - stress-test
    - low-rank
    - r8
    - pissa
- name: pissa_r8_seed43
  peft:
    type: pissa
    r: 8
    lora_alpha: 16
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: pissa_r8_seed43
    tags:
    - stress-test
    - low-rank
    - r8
    - pissa
- name: adalora_r1_seed42
  peft:
    type: adalora
    r: 1
    lora_alpha: 2
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: adalora_r1_seed42
    tags:
    - stress-test
    - low-rank
    - r1
    - adalora
- name: adalora_r1_seed43
  peft:
    type: adalora
    r: 1
    lora_alpha: 2
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: adalora_r1_seed43
    tags:
    - stress-test
    - low-rank
    - r1
    - adalora
- name: adalora_r2_seed42
  peft:
    type: adalora
    r: 2
    lora_alpha: 4
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: adalora_r2_seed42
    tags:
    - stress-test
    - low-rank
    - r2
    - adalora
- name: adalora_r2_seed43
  peft:
    type: adalora
    r: 2
    lora_alpha: 4
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: adalora_r2_seed43
    tags:
    - stress-test
    - low-rank
    - r2
    - adalora
- name: adalora_r4_seed42
  peft:
    type: adalora
    r: 4
    lora_alpha: 8
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: adalora_r4_seed42
    tags:
    - stress-test
    - low-rank
    - r4
    - adalora
- name: adalora_r4_seed43
  peft:
    type: adalora
    r: 4
    lora_alpha: 8
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: adalora_r4_seed43
    tags:
    - stress-test
    - low-rank
    - r4
    - adalora
- name: adalora_r8_seed42
  peft:
    type: adalora
    r: 8
    lora_alpha: 16
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 42
  wandb:
    run_name: adalora_r8_seed42
    tags:
    - stress-test
    - low-rank
    - r8
    - adalora
- name: adalora_r8_seed43
  peft:
    type: adalora
    r: 8
    lora_alpha: 16
    lora_dropout: 0.0
    target_modules:
    - q_proj
    - v_proj
    - k_proj
    - o_proj
    - up_proj
    - down_proj
    - gate_proj
  common:
    seed: 43
  wandb:
    run_name: adalora_r8_seed43
    tags:
    - stress-test
    - low-rank
    - r8
    - adalora
